webpackJsonp([0],{0:function(t,e){},"2+J0":function(t,e){},"8vU0":function(t,e){},"9kJ6":function(t,e){},"9o6N":function(t,e){},EZsv:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("7+uW"),s=i("/ocq"),a={render:function(){var t=this.$createElement;return(this._self._c||t)("button",{staticClass:"button-small pure-button",class:{"pure-button-primary":this.active},on:{click:this.clickBtn}},[this._v(this._s(this.btnTxt))])},staticRenderFns:[]};var r={name:"Vmall",data:function(){return{products:[]}},components:{BuyBtn:i("VU/8")({name:"BuyBtn",data:function(){return{active:!0,btnTxt:"加入购物车"}},methods:{clickBtn:function(){this.active?(this.active=!1,this.btnTxt="取消购买",this.$emit("addToCart")):(this.active=!0,this.btnTxt="加入购物车",this.$emit("removeFromCart"))}}},a,!1,function(t){i("8vU0")},null,null).exports},methods:{addToCart:function(t){this.vHandler.$emit("addToCart11",t),this.vHandler.$emit("searching")},removeFromCart:function(t){this.vHandler.$emit("removeFromCart",t)}},beforeMount:function(){this.$http.get("./static/data/products.json").then(function(t){this.products=t.data},function(t){console.log("Fail: ",t.status,t.statusText)})}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("keep-alive",[i("div",{staticClass:"pure-g"},t._l(t.products,function(e){return i("div",{key:e.id,staticClass:"pure-u-1-4"},[i("div",{staticClass:"panel"},[i("img",{staticClass:"pure-img",attrs:{src:e.pic}}),t._v(" "),i("h3",[t._v(t._s(e.name))]),t._v(" "),i("p",[t._v(t._s(t._f("currency")(e.price)))]),t._v(" "),i("div",{staticClass:"panel-btn"},[i("buy-btn",{on:{addToCart:function(i){return t.addToCart(e.id)},removeFromCart:function(i){return t.removeFromCart(e.id)}}})],1)])])}),0)])},staticRenderFns:[]};var l=i("VU/8")(r,o,!1,function(t){i("9kJ6")},null,null).exports,d={name:"MyCart",data:function(){return{msg:"您还未选购任何商品 ...",productArr:[]}},computed:{priceTotal:function(){for(var t=0,e=0;e<this.productArr.length;e++)t+=parseFloat(this.productArr[e].price);return t}},methods:{removeFromCart:function(t){this.vHandler.$emit("removeFromCart",t)}},beforeMount:function(){this.$http.get("./static/data/products.json").then(function(t){for(var e=this.vHandler.productIds.sort(),i=0;i<e.length;i++)this.productArr.push(t.data[e[i]-1])},function(t){console.log("Fail: ",t.status,t.statusText)})}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.productArr.length>0?i("table",{staticClass:"pure-table pure-table-horizontal"},[t._m(0),t._v(" "),i("tbody",[t._l(t.productArr,function(e,n){return i("tr",{key:n},[i("td",[t._v(t._s(n+1))]),t._v(" "),i("td",[i("img",{staticClass:"pure-img",attrs:{src:e.pic}})]),t._v(" "),i("td",[t._v(t._s(e.name))]),t._v(" "),i("td",[t._v(t._s(e.price))]),t._v(" "),i("td",[i("button",{staticClass:"button-del pure-button",on:{click:function(i){t.productArr.splice(n,1),t.removeFromCart(e.id)}}},[t._v("删除")])])])}),t._v(" "),i("tr",{staticClass:"count-row"},[i("td",{attrs:{colspan:"3"}},[t._v("合计：")]),t._v(" "),i("td",{attrs:{colspan:"2"}},[t._v(t._s(t.priceTotal))])])],2)]):i("h3",[t._v(t._s(t.msg))])},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("tr",[i("th",[t._v("#")]),t._v(" "),i("th",[t._v("商品图片")]),t._v(" "),i("th",[t._v("商品名称")]),t._v(" "),i("th",[t._v("商品价格")]),t._v(" "),i("th",[t._v("操作")])])])}]};var u=i("VU/8")(d,c,!1,function(t){i("zvDm")},"data-v-e329b700",null).exports,h={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrap",attrs:{id:"wrap"}},[i("div",{staticClass:"logGet"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),i("div",{staticClass:"logC"},[i("a",[i("button",{on:{click:t.login}},[t._v("登 录")])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"logD logDtip"},[e("p",{staticClass:"p1"},[this._v("登录")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"lgD"},[e("input",{attrs:{type:"text",placeholder:"输入用户名",autocomplete:"off"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"lgD"},[e("input",{attrs:{type:"password",placeholder:"输入用户密码",autocomplete:"off"}})])}]};var f=i("VU/8")({methods:{login:function(){this.$router.replace("/vmall")}}},h,!1,function(t){i("Yc2I")},null,null).exports,p={name:"puzzle",data:function(){return{moveStart:"",displayTips:!1,verification:!1,randomX:null,randomY:null,imgRandom:"",left_Num:0,dataWidth:404,dataHeight:90,puzzleSize:100,deviation:11,scale:1,reTimer:null,isleavePage:!1}},props:{width:{type:[String,Number],default:340},height:{type:[String,Number],default:120},cropImage:{type:[Boolean],default:!1},puzzleImgList:{type:Array,default:function(){return["../../../static/img/bg.jpg"]}},PlSize:{type:[String,Number],default:48},Deviation:{type:[String,Number],default:4},padding:{type:[Number],default:20},onSuccess:{type:Function,default:function(){alert("验证成功")}},onError:{type:Function,default:function(){alert("验证失败")}}},methods:{RandomNum:function(t,e){var i=e-t+1,n=Math.random();return t+Math.floor(n*i)},refreshImg:function(){var t=this.RandomNum(0,this.puzzleImgList.length-1);this.imgRandom=this.puzzleImgList[t],this.initCanvas()},initCanvas:function(){this.clearCanvas();var t=this.dataWidth,e=this.dataHeight,i=this.puzzleSize,n=20+i,s=t-20-i-i/6,a=e-20-i-i/6;this.randomX=this.RandomNum(n,s),this.randomY=this.RandomNum(a,20);var r=this.randomX,o=this.randomY;this.left_Num=10-r;var l=i/3,d=this.$refs.puzzleBox,c=this.$refs.puzzleLost,u=this.$refs.puzzleShadow,h=d.getContext("2d"),f=c.getContext("2d"),p=u.getContext("2d");h.globalCompositeOperation="xor",h.shadowBlur=10,h.shadowColor="#fff",h.shadowOffsetX=3,h.shadowOffsetY=3,h.fillStyle="rgba(0,0,0,0.7)",h.beginPath(),h.lineWidth="1",h.strokeStyle="rgba(0,0,0,0)",h.moveTo(r,o),h.lineTo(r+l,o),h.bezierCurveTo(r+l,o-l,r+2*l,o-l,r+2*l,o),h.lineTo(r+3*l,o),h.lineTo(r+3*l,o+l),h.bezierCurveTo(r+2*l,o+l,r+2*l,o+2*l,r+3*l,o+2*l),h.lineTo(r+3*l,o+3*l),h.lineTo(r,o+3*l),h.closePath(),h.stroke(),h.fill();var v=new Image;v.src=this.imgRandom,v.onload=function(){f.beginPath(),f.strokeStyle="rgba(0,0,0,0)",f.moveTo(r,o),f.lineTo(r+l,o),f.bezierCurveTo(r+l,o-l,r+2*l,o-l,r+2*l,o),f.lineTo(r+3*l,o),f.lineTo(r+3*l,o+l),f.bezierCurveTo(r+2*l,o+l,r+2*l,o+2*l,r+3*l,o+2*l),f.lineTo(r+3*l,o+3*l),f.lineTo(r,o+3*l),f.closePath(),f.stroke(),f.shadowBlur=10,f.shadowColor="black",f.clip(),f.drawImage(v,0,0,t,e)},p.beginPath(),p.lineWidth="1",p.strokeStyle="rgba(0,0,0,0)",p.moveTo(r,o),p.lineTo(r+l,o),p.bezierCurveTo(r+l,o-l,r+2*l,o-l,r+2*l,o),p.lineTo(r+3*l,o),p.lineTo(r+3*l,o+l),p.bezierCurveTo(r+2*l,o+l,r+2*l,o+2*l,r+3*l,o+2*l),p.lineTo(r+3*l,o+3*l),p.lineTo(r,o+3*l),p.closePath(),p.stroke(),p.shadowBlur=20,p.shadowColor="black",p.fill()},clearCanvas:function(){var t=this.$refs.puzzleBox,e=this.$refs.puzzleLost,i=this.$refs.puzzleShadow;t.setAttribute("height",t.getAttribute("height")),e.setAttribute("height",t.getAttribute("height")),i.setAttribute("height",t.getAttribute("height"))},startMove:function(t){console.log(t),t=t||window.event,this.$refs.sliderBtn.style.backgroundPosition="0 -216px",this.moveStart=t.pageX||t.targetTouches[0].pageX,this.addMouseMoveListener()},moving:function(t){var e=((t=t||window.event).pageX||t.targetTouches[0].pageX)-this.moveStart,i=this.dataWidth,n=this.puzzleSize;return""===this.moveStart?"":e<0||e>i-20-n?"":(this.$refs.sliderBtn.style.left=e+"px",this.$refs.sliderBtn.style.transition="inherit",this.$refs.puzzleLost.style.left=e+"px",this.$refs.puzzleLost.style.transition="inherit",this.$refs.puzzleShadow.style.left=e+"px",void(this.$refs.puzzleShadow.style.transition="inherit"))},moveEnd:function(t){var e=this,i=((t=t||window.event).pageX||t.changedTouches[0].pageX)-e.moveStart,n=e.randomX-10,s=this.deviation,a=n-s,r=n+s;""!==e.moveStart&&(r>i&&i>a?(e.displayTips=!0,e.verification=!0,setTimeout(function(){e.isleavePage||(e.displayTips=!1,e.initCanvas())},2e3),e.onSuccess()):(e.displayTips=!0,e.verification=!1,setTimeout(function(){e.isleavePage||(e.displayTips=!1)},2e3),e.onError())),void 0!==e.$refs.sliderBtn&&void 0!==e.$refs.puzzleLost&&void 0!==e.$refs.puzzleShadow&&(e.reTimer=setTimeout(function(){e.isleavePage||(e.$refs.sliderBtn.style.left=0,e.$refs.sliderBtn.style.transition="left 0.5s",e.$refs.puzzleLost.style.left=0,e.$refs.puzzleLost.style.transition="left 0.5s",e.$refs.puzzleShadow.style.left=0,e.$refs.puzzleShadow.style.transition="left 0.5s")},1e3),e.$refs.sliderBtn.style.backgroundPosition="0 -84px"),e.moveStart=""},addMouseMoveListener:function(){document.addEventListener("mousemove",this.moving),document.addEventListener("touchmove",this.moving),document.addEventListener("mouseup",this.moveEnd),document.addEventListener("touchend",this.moveEnd)}},mounted:function(){this.dataWidth=.884*this.$refs.puzzle.clientWidth,this.dataHeight=this.dataWidth*(this.height/this.width),this.scale=this.$refs.puzzle.clientWidth/260,this.puzzleSize=this.dataWidth*(this.PlSize/this.width),setTimeout(this.refreshImg,0)},created:function(){var t=this.RandomNum(0,this.puzzleImgList.length-1);this.imgRandom=this.puzzleImgList[t],this.puzzleSize=Number(this.PlSize),this.deviation=Number(this.Deviation)},watch:{},beforeDestroy:function(){this.isleavePage=!0}},v={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"puzzle",staticStyle:{display:"inline-block"},attrs:{id:"puzzle"}},[i("div",{staticClass:"puzzle-container"},[i("div",{style:"position:relative;overflow:hidden;width:"+t.dataWidth+"px;"},[i("div",{style:"position:relative;width:"+t.dataWidth+"px;height:"+t.dataHeight+"px;"},[i("img",{ref:"scream",style:"width:"+t.dataWidth+"px;height:"+t.dataHeight+"px;",attrs:{id:"scream",src:t.imgRandom}}),t._v(" "),i("canvas",{ref:"puzzleBox",attrs:{id:"puzzle-box",width:t.dataWidth,height:t.dataHeight}})]),t._v(" "),i("div",{staticClass:"puzzle-lost-box",style:"left:"+t.left_Num+"px;width:"+t.dataWidth+"px;height:"+t.dataHeight+"px;"},[i("canvas",{ref:"puzzleShadow",attrs:{id:"puzzle-shadow",width:t.dataWidth,height:t.dataHeight}}),t._v(" "),i("canvas",{ref:"puzzleLost",attrs:{id:"puzzle-lost",width:t.dataWidth,height:t.dataHeight}})]),t._v(" "),i("p",{ref:"verTips",staticClass:"ver-tips",style:"height: "+22*t.scale+"px;line-height:"+22*t.scale+"px;bottom: "+(1==t.displayTips?0:-22*t.scale)+"px;font-size: "+12*t.scale+"px;"},[t.verification?[i("span",{style:"color:#42ca6b;line-height:"+22*t.scale+"px;"},[t._v("验证通过")]),t._v(" "),i("span",{style:"margin-left:"+4*t.scale+"px;line-height:"+22*t.scale+"px;"},[t._v("哇喔,怪物吃了拼图,快去登录吧~")])]:t._e(),t._v(" "),t.verification?t._e():[i("span",{style:"color:red;line-height:"+22*t.scale+"px;"},[t._v("验证失败:")]),t._v(" "),i("span",{style:"margin-left:"+4*t.scale+"px;line-height:"+22*t.scale+"px;"},[t._v("拖动滑块将悬浮图像正确拼合")])]],2)]),t._v(" "),i("div",{staticClass:"re-btn",style:"height: "+28*t.scale+"px;padding: "+1*t.scale+"px "+16*t.scale+"px;font-size: "+18*t.scale+"px;",on:{click:t.refreshImg}},[i("a-icon",{attrs:{type:"redo"}})],1)]),t._v(" "),i("br"),t._v(" "),i("div",{staticClass:"slider-container",style:"width:"+t.dataWidth+"px;"},[i("div",{staticClass:"slider-bar",style:"border-radius:"+24*t.scale+"px;"},[i("p",{staticClass:"slider-bar-text select-none",style:"line-height:"+28*t.scale+"px;font-size:"+12*t.scale+"px;",attrs:{onselectstart:"return false"}},[t._v("按住滑块， 拖动完成上方拼图")])]),t._v(" "),i("div",{ref:"sliderBtn",staticClass:"slider-btn",style:"top: "+-7*t.scale+"px;",on:{mousedown:t.startMove,touchstart:t.startMove}},[i("a-icon",{style:"font-size: "+44*t.scale+"px;",attrs:{type:"pause-circle",theme:"twoTone",twoToneColor:"#52c41a"}}),t._v(" "),i("span",{staticClass:"slider-center-zzz"},[t._v("▍▍▍")])],1)])])},staticRenderFns:[]};var m=i("VU/8")(p,v,!1,function(t){i("WopL")},"data-v-35ab6618",null).exports,g={name:"code-check",props:{identifyCode:{type:String,default:"1234"},fontSizeMin:{type:Number,default:25},fontSizeMax:{type:Number,default:35},backgroundColorMin:{type:Number,default:200},backgroundColorMax:{type:Number,default:220},dotColorMin:{type:Number,default:60},dotColorMax:{type:Number,default:120},contentWidth:{type:Number,default:90},contentHeight:{type:Number,default:38}},methods:{randomNum:function(t,e){return Math.floor(Math.random()*(e-t)+t)},randomColor:function(t,e){return"rgb("+this.randomNum(t,e)+","+this.randomNum(t,e)+","+this.randomNum(t,e)+")"},drawPic:function(){var t=document.getElementById("s-canvas").getContext("2d");t.textBaseline="bottom",t.fillStyle="#e6ecfd",t.fillRect(0,0,this.contentWidth,this.contentHeight);for(var e=0;e<this.identifyCode.length;e++)this.drawText(t,this.identifyCode[e],e);this.drawLine(t),this.drawDot(t)},drawText:function(t,e,i){t.fillStyle=this.randomColor(50,160),t.font=this.randomNum(this.fontSizeMin,this.fontSizeMax)+"px SimHei";var n=(i+1)*(this.contentWidth/(this.identifyCode.length+1)),s=this.randomNum(this.fontSizeMax,this.contentHeight-5),a=this.randomNum(-30,30);t.translate(n,s),t.rotate(a*Math.PI/180),t.fillText(e,0,0),t.rotate(-a*Math.PI/180),t.translate(-n,-s)},drawLine:function(t){for(var e=0;e<4;e++)t.strokeStyle=this.randomColor(100,200),t.beginPath(),t.moveTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),t.lineTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),t.stroke()},drawDot:function(t){for(var e=0;e<30;e++)t.fillStyle=this.randomColor(0,255),t.beginPath(),t.arc(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight),1,0,2*Math.PI),t.fill()}},watch:{identifyCode:function(){this.drawPic()}},mounted:function(){this.drawPic()}},_={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"s-canvas"},[e("canvas",{attrs:{id:"s-canvas",width:this.contentWidth,height:this.contentHeight}})])},staticRenderFns:[]};i("VU/8")(g,_,!1,function(t){i("RFmI")},null,null).exports;var z={name:"code-main",data:function(){return{identifyCodes:"1234567890abcdefjhijklinopqrsduvwxyz",identifyCode:""}},created:function(){this.identifyCode="",this.makeCode(this.identifyCodes,4)},methods:{refreshCode:function(){this.identifyCode="",this.makeCode(this.identifyCodes,4)},makeCode:function(t,e){for(var i=0;i<e;i++)this.identifyCode+=this.identifyCodes[this.randomNum(0,this.identifyCodes.length)]},randomNum:function(t,e){return Math.floor(Math.random()*(e-t)+t)}}},C={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{on:{click:this.refreshCode}},[this._v("验证码")]),this._v(" "),e("div",{on:{click:this.refreshCode}},[e("code-check",{attrs:{identifyCode:this.identifyCode}})],1)])},staticRenderFns:[]};var y=i("VU/8")(z,C,!1,function(t){i("9o6N")},null,null).exports;n.a.use(s.a);var b=new s.a({routes:[{path:"/",component:f},{path:"/vmall",component:l},{path:"/my-cart",component:u},{path:"/checkpic",component:m},{path:"/code",component:y}]}),x=i("8+8L"),w={name:"Menus",data:function(){return{activeId:1,menus:[{id:1,name:"VMall",path:"/vmall"},{id:2,name:"My Cart",path:"/my-cart"}],cartCount:0}},methods:{switchMenu:function(t){this.activeId=t}},beforeMount:function(){var t=this;t.vHandler.$on("addToCart11",function(e){t.vHandler.productIds.push(e),t.cartCount=t.vHandler.productIds.length}),t.vHandler.$on("removeFromCart",function(e){for(var i=0;i<t.vHandler.productIds.length;i++)if(t.vHandler.productIds[i]==e){t.vHandler.productIds.splice(i,1);break}t.cartCount=t.vHandler.productIds.length})},mounted:function(){var t=window.location.hash.split("#")[1];if(t.length>1)for(var e=0;e<this.menus.length;e++)if(t==this.menus[e].path){this.activeId=this.menus[e].id;break}}},T={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pure-menu pure-menu-horizontal"},[i("ul",{staticClass:"pure-menu-list"},[t._l(t.menus,function(e){return i("li",{key:e.id,staticClass:"pure-menu-item",class:[e.id==t.activeId?"pure-menu-selected":""],on:{click:function(i){return t.switchMenu(e.id)}}},[i("router-link",{staticClass:"pure-menu-link",attrs:{to:e.path}},[t._v(t._s(e.name))])],1)}),t._v(" "),t.cartCount?i("div",{staticClass:"cart-count"},[t._v(t._s(t.cartCount))]):t._e()],2)])},staticRenderFns:[]};var $={name:"listen",created:function(){this.vHandler.$on("searching",function(){console.log("我这边侦听到一个事件了！！")})}},S={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]};var k={name:"App",components:{Menus:i("VU/8")(w,T,!1,function(t){i("2+J0")},"data-v-7628e1aa",null).exports,Listen:i("VU/8")($,S,!1,function(t){i("EZsv")},null,null).exports}},N={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("menus"),this._v(" "),e("div",{attrs:{id:"view"}},[e("router-view")],1),this._v(" "),e("listen")],1)},staticRenderFns:[]};var M=i("VU/8")(k,N,!1,function(t){i("OObZ")},null,null).exports;n.a.config.productionTip=!0,n.a.use(x.a),n.a.filter("currency",function(t){var e=/\d{1,3}(?=(\d{3})+$)/g;return"￥"+parseFloat(t).toFixed(2).toString().replace(/^(\d+)((\.\d+)?)$/,function(t,i,n){return i.replace(e,"$&,")+n})}),n.a.prototype.vHandler=new n.a({data:function(){return{productIds:[]}}}),new n.a({el:"#app",router:b,components:{App:M},template:"<App/>"})},OObZ:function(t,e){},RFmI:function(t,e){},WopL:function(t,e){},Yc2I:function(t,e){},zvDm:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.0e2caa6f9cf861a8292f.js.map